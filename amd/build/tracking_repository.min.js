/**
 * This plugin provides access to Moodle data in form of analytics and reports in real time.
 *
 * @copyright  2020 IntelliBoard, Inc
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @see    https://intelliboard.net/
 */
define("local_intellidata/tracking_repository",["jquery","core/ajax","core/log"],(function($,ajax,log){return{sendRequest:async function(page,param){log.debug("IntelliData Request",[page,param]);var useragent="";if(navigator.userAgent&&navigator.userAgentData){useragent=navigator.userAgent;try{const ua=await navigator.userAgentData.getHighEntropyValues(["platform","platformVersion"]),windowsIndex=useragent.indexOf("Windows");if("Windows"==ua.platform&&-1!==windowsIndex){const semicolonIndex=useragent.indexOf(";",windowsIndex);-1!==semicolonIndex&&(useragent=useragent.substring(0,windowsIndex)+"Windows NT "+ua.platformVersion+useragent.substring(semicolonIndex))}}catch(error){log.debug("Error retrieving platform info: "+error.message)}}ajax.call([{methodname:"local_intellidata_save_tracking",args:{page:page,param:param,useragent:useragent}}])[0].done((function(response){log.debug("IntelliData: Request Inserted at "+response.time)})).fail((function(ex){log.debug("IntelliData: Request ERROR: "+ex.message)}))}}}));

//# sourceMappingURL=tracking_repository.min.js.map